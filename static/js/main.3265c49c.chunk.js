(this["webpackJsonpemail-workflow-front-end"]=this["webpackJsonpemail-workflow-front-end"]||[]).push([[0],{42:function(e,t,n){},72:function(e,t,n){"use strict";n.r(t);var a,r=n(1),s=n.n(r),c=n(32),i=n.n(c),l=(n(42),n(43),n(2)),o=n(4),j=n(5),b=n(6),d=n.p+"static/media/main.c15b52bc.svg",u=n(3),m=n.n(u),p=n(8),h=n(7),g=n(11),x=n.n(g),O=n(0),f=s.a.createContext(),v=function(e){var t=e.children,n=Object(r.useState)(!0),a=Object(h.a)(n,2),s=a[0],c=a[1],i=Object(r.useState)(null),l=Object(h.a)(i,2),o=l[0],j=l[1],b=function(e){j(e)},d=function(){j(null)},u=function(){var e=Object(p.a)(m.a.mark((function e(){var t,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.a.get("/api/v1/users/showMe");case 3:t=e.sent,n=t.data,b(n.user),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),d();case 11:c(!1);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=Object(p.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.a.delete("/api/v1/auth/logout");case 3:d(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){u()}),[]),Object(O.jsx)(f.Provider,{value:{isLoading:s,saveUser:b,user:o,logoutUser:g},children:t})},w=function(){return Object(r.useContext)(f)};var y,k,N=b.a.div(a||(a=Object(j.a)(["\n  display: grid;\n  align-items: center;\n  h2 {\n    font-weight: 700;\n  }\n  h2 span {\n    color: var(--primary-500);\n  }\n  .main-img {\n    display: none;\n  }\n  @media (min-width: 992px) {\n    grid-template-columns: 1fr 1fr;\n    column-gap: 6rem;\n    .main-img {\n      display: block;\n    }\n  }\n  .btn {\n    margin-left: 0.25rem;\n    margin-right: 0.25rem;\n  }\n"]))),S=function(){var e=w().user;return Object(O.jsxs)(O.Fragment,{children:[e&&Object(O.jsx)(o.a,{to:"/dashboard"}),Object(O.jsxs)(N,{className:"page",children:[Object(O.jsxs)("div",{className:"info",children:[Object(O.jsxs)("h2",{children:[Object(O.jsx)("span",{children:"Auth"}),"Workflow"]}),Object(O.jsx)("p",{children:"I'm baby viral enamel pin chartreuse cliche retro af selfies kinfolk photo booth plaid jianbing actually squid 3 wolf moon lumbersexual. Hell of humblebrag gluten-free lo-fi man braid leggings."}),Object(O.jsx)("p",{children:"Cloud bread kale chips wayfarers deep v chicharrones leggings fingerstache actually blog cliche four dollar toast. Sriracha ugh kickstarter, next level la croix butcher lomo."}),Object(O.jsx)(l.b,{to:"/login",className:"btn",children:"Login"}),Object(O.jsx)(l.b,{to:"/register",className:"btn",children:"Register"})]}),Object(O.jsx)("img",{src:d,alt:"job hunt",className:"img main-img"})]})]})},L=b.a.main(y||(y=Object(j.a)(["\n  text-align: center;\n  padding-top: 5rem;\n  h1 {\n    font-size: 9rem;\n  }\n"]))),C=function(){return Object(O.jsx)(L,{className:"page",children:Object(O.jsxs)("div",{children:[Object(O.jsx)("h1",{children:"404"}),Object(O.jsx)("h4",{children:"page not found"}),Object(O.jsx)(l.b,{to:"/",className:"btn",children:"Back Home"})]})})},A=n(14),P=n(13),R=function(e){var t=e.type,n=e.name,a=e.value,r=e.handleChange;return Object(O.jsxs)("div",{className:"form-row",children:[Object(O.jsx)("label",{htmlFor:n,className:"form-label",children:n}),Object(O.jsx)("input",{type:t,value:a,name:n,onChange:r,className:"form-input"})]})},F=function(){var e=Object(r.useState)({show:!1,text:"",type:"danger"}),t=Object(h.a)(e,2),n=t[0],a=t[1],s=Object(r.useState)(!1),c=Object(h.a)(s,2),i=c[0],l=c[1],o=Object(r.useState)(!1),j=Object(h.a)(o,2);return{alert:n,showAlert:function(e){var t=e.text,n=e.type;a({show:!0,text:t,type:void 0===n?"danger":n})},loading:i,setLoading:l,success:j[0],setSuccess:j[1],hideAlert:function(){a({show:!1,text:"",type:"danger"})}}};var D,I=b.a.section(k||(k=Object(j.a)(["\n  .alert {\n    margin-top: 3rem;\n    margin-bottom: -1.5rem;\n  }\n  h4 {\n    text-align: center;\n  }\n  p {\n    margin: 0;\n    margin-top: 1rem;\n    text-align: center;\n  }\n  .login-link {\n    display: inline-block;\n    margin-left: 0.25rem;\n    text-transform: capitalize;\n    color: var(--primary-500);\n    cursor: pointer;\n  }\n  .btn:disabled {\n    cursor: not-allowed;\n  }\n"]))),U=function(){var e=Object(r.useState)({name:"",email:"",password:""}),t=Object(h.a)(e,2),n=t[0],a=t[1],s=F(),c=s.alert,i=s.showAlert,o=s.loading,j=s.setLoading,b=s.success,d=s.setSuccess,u=s.hideAlert,g=function(e){a(Object(P.a)(Object(P.a)({},n),{},Object(A.a)({},e.target.name,e.target.value)))},f=function(){var e=Object(p.a)(m.a.mark((function e(t){var r,s,c,l,o,b,p;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),u(),j(!0),r=n.name,s=n.email,c=n.password,l={name:r,email:s,password:c},e.prev=5,e.next=8,x.a.post("/api/v1/auth/register",l);case 8:o=e.sent,b=o.data,d(!0),a({name:"",email:"",password:""}),i({text:b.msg,type:"success"}),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(5),p=e.t0.response.data.msg,i({text:p||"there was an error"});case 19:j(!1);case 20:case"end":return e.stop()}}),e,null,[[5,15]])})));return function(t){return e.apply(this,arguments)}}();return Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)(I,{className:"page",children:[c.show&&Object(O.jsx)("div",{className:"alert alert-".concat(c.type),children:c.text}),!b&&Object(O.jsxs)("form",{className:o?"form form-loading":"form",onSubmit:f,children:[Object(O.jsx)(R,{type:"name",name:"name",value:n.name,handleChange:g}),Object(O.jsx)(R,{type:"email",name:"email",value:n.email,handleChange:g}),Object(O.jsx)(R,{type:"password",name:"password",value:n.password,handleChange:g}),Object(O.jsx)("button",{type:"submit",className:"btn btn-block",disabled:o,children:o?"Loading...":"Register"}),Object(O.jsxs)("p",{children:["Already a have an account?",Object(O.jsx)(l.b,{to:"/login",className:"login-link",children:"Log In"})]})]})]})})};var z,W=b.a.section(D||(D=Object(j.a)(["\n  .alert {\n    margin-top: 3rem;\n  }\n  h4 {\n    text-align: center;\n  }\n  p {\n    margin: 0;\n    text-align: center;\n  }\n  .btn {\n    margin-bottom: 1.5rem;\n  }\n  .register-link,\n  .reset-link {\n    display: inline-block;\n    margin-left: 0.25rem;\n    text-transform: capitalize;\n    color: var(--primary-500);\n    cursor: pointer;\n  }\n  .reset-link {\n    margin-top: 0.25rem;\n  }\n  .btn:disabled {\n    cursor: not-allowed;\n  }\n"]))),E=function(){var e=w().saveUser,t=Object(o.g)(),n=Object(r.useState)({email:"",password:""}),a=Object(h.a)(n,2),s=a[0],c=a[1],i=F(),j=i.alert,b=i.showAlert,d=i.loading,u=i.setLoading,g=i.hideAlert,f=function(e){c(Object(P.a)(Object(P.a)({},s),{},Object(A.a)({},e.target.name,e.target.value)))},v=function(){var n=Object(p.a)(m.a.mark((function n(a){var r,i,l,o,j;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a.preventDefault(),g(),u(!0),r=s.email,i=s.password,l={email:r,password:i},n.prev=5,n.next=8,x.a.post("/api/v1/auth/login",l);case 8:o=n.sent,j=o.data,c({name:"",email:"",password:""}),b({text:"Welcome, ".concat(j.user.name,". Redirecting to dashboard..."),type:"success"}),u(!1),e(j.user),t.push("/dashboard"),n.next=21;break;case 17:n.prev=17,n.t0=n.catch(5),b({text:n.t0.response.data.msg}),u(!1);case 21:case"end":return n.stop()}}),n,null,[[5,17]])})));return function(e){return n.apply(this,arguments)}}();return Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)(W,{className:"page",children:[j.show&&Object(O.jsx)("div",{className:"alert alert-".concat(j.type),children:j.text}),Object(O.jsxs)("form",{className:d?"form form-loading":"form",onSubmit:v,children:[Object(O.jsx)(R,{type:"email",name:"email",value:s.email,handleChange:f}),Object(O.jsx)(R,{type:"password",name:"password",value:s.password,handleChange:f}),Object(O.jsx)("button",{type:"submit",className:"btn btn-block",disabled:d,children:d?"Loading...":"Login"}),Object(O.jsxs)("p",{children:["Don't have an account?",Object(O.jsx)(l.b,{to:"/register",className:"register-link",children:"Register"})]}),Object(O.jsxs)("p",{children:["Forgot your password?"," ",Object(O.jsx)(l.b,{to:"/forgot-password",className:"reset-link",children:"Reset Password"})]})]})]})})};var H,T=b.a.section(z||(z=Object(j.a)([""]))),B=function(){var e=Object(r.useState)(!1),t=Object(h.a)(e,2),n=t[0],a=t[1],s=Object(r.useState)(!1),c=Object(h.a)(s,2),i=c[0],j=c[1],b=w().isLoading,d=new URLSearchParams(Object(o.h)().search),u=function(){var e=Object(p.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j(!0),e.prev=1,e.next=4,x.a.post("/api/v1/auth/verify-email",{verificationToken:d.get("token"),email:d.get("email")});case 4:t=e.sent,t.data,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),a(!0);case 11:j(!1);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){b||u()}),[]),i?Object(O.jsx)(T,{className:"page",children:Object(O.jsx)("h2",{children:"Loading..."})}):n?Object(O.jsx)(T,{className:"page",children:Object(O.jsx)("h4",{children:"There was an error, please double check your verification link "})}):Object(O.jsxs)(T,{className:"page",children:[Object(O.jsx)("h2",{children:"Account Confirmed"}),Object(O.jsx)(l.b,{to:"/login",className:"btn",children:"Please login"})]})};var J,M,Y=b.a.div(H||(H=Object(j.a)(["\n  p span {\n    background: var(--primary-500);\n    padding: 0.15rem 0.25rem;\n    color: var(--white);\n    border-radius: var(--borderRadius);\n    letter-spacing: var(--letterSpacing);\n  }\n"]))),q=function(){var e=w().user,t=(e.name,e.userId),n=e.role;return Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)(Y,{className:"page",children:[Object(O.jsxs)("h2",{children:["Hello there, ",e.name]}),Object(O.jsxs)("p",{children:["Your ID : ",Object(O.jsx)("span",{children:t})]}),Object(O.jsxs)("p",{children:["Your Role : ",Object(O.jsx)("span",{children:n})]})]})})},G=n(37),K=["children"],Q=function(e){var t=e.children,n=Object(G.a)(e,K),a=w().user;return Object(O.jsx)(o.b,Object(P.a)(Object(P.a)({},n),{},{render:function(){return a?t:Object(O.jsx)(o.a,{to:"/"})}}))},V=b.a.main(J||(J=Object(j.a)(["\n  h4,\n  p {\n    text-align: center;\n  }\n  p {\n    margin: 0;\n    margin-top: 1rem;\n  }\n  .login-link {\n    display: inline-block;\n    margin-left: 0.25rem;\n    text-transform: capitalize;\n    color: var(--primary-500);\n    cursor: pointer;\n  }\n"]))),X=function(){var e=Object(r.useState)(""),t=Object(h.a)(e,2),n=t[0],a=t[1],s=F(),c=s.alert,i=s.showAlert,o=s.loading,j=s.setLoading,b=s.success,d=s.setSuccess,u=s.hideAlert,g=function(){var e=Object(p.a)(m.a.mark((function e(t){var a,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),j(!0),u(),n){e.next=7;break}return i({text:"Please provide email"}),j(!1),e.abrupt("return");case 7:return e.prev=7,e.next=10,x.a.post("/api/v1/auth/forgot-password",{email:n});case 10:a=e.sent,r=a.data,i({text:r.msg,type:"success"}),d(!0),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(7),i({text:"Something went wrong, please try again"}),d(!0);case 20:j(!1);case 21:case"end":return e.stop()}}),e,null,[[7,16]])})));return function(t){return e.apply(this,arguments)}}();return Object(O.jsxs)(V,{className:"page",children:[c.show&&Object(O.jsx)("div",{className:"alert alert-".concat(c.type),children:c.text}),!b&&Object(O.jsxs)("form",{className:o?"form form-loading":"form",onSubmit:g,children:[Object(O.jsx)("h4",{children:"Forgot password"}),Object(O.jsx)(R,{type:"email",name:"email",value:n,handleChange:function(e){a(e.target.value)}}),Object(O.jsx)("button",{type:"submit",className:"btn btn-block",disabled:o,children:o?"Please Wait...":"Get Reset Password Link"}),Object(O.jsxs)("p",{children:["Already a have an account?",Object(O.jsx)(l.b,{to:"/login",className:"login-link",children:"Log In"})]})]})]})};var Z,$=b.a.section(M||(M=Object(j.a)(["\n  h4,\n  p {\n    text-align: center;\n  }\n  p {\n    margin: 0;\n    margin-top: 1rem;\n  }\n"]))),_=function(){var e=Object(o.g)(),t=Object(r.useState)(""),n=Object(h.a)(t,2),a=n[0],s=n[1],c=F(),i=c.alert,l=c.showAlert,j=c.loading,b=c.setLoading,d=c.success,u=c.setSuccess,g=new URLSearchParams(Object(o.h)().search),f=function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s(t.target.value);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(){var t=Object(p.a)(m.a.mark((function t(n){var r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),b(!0),a){t.next=6;break}return l({text:"please enter password"}),b(!1),t.abrupt("return");case 6:return t.prev=6,t.next=9,x.a.post("/api/v1/auth/reset-password",{password:a,token:g.get("token"),email:g.get("email")});case 9:r=t.sent,r.data,b(!1),u(!0),l({text:"Success, redirecting to login page shortly",type:"success"}),setTimeout((function(){e.push("/login")}),3e3),t.next=21;break;case 17:t.prev=17,t.t0=t.catch(6),l({text:t.t0.response.data.msg}),b(!1);case 21:case"end":return t.stop()}}),t,null,[[6,17]])})));return function(e){return t.apply(this,arguments)}}();return Object(O.jsxs)($,{className:"page",children:[i.show&&Object(O.jsx)("div",{className:"alert alert-".concat(i.type),children:i.text}),!d&&Object(O.jsxs)("form",{className:j?"form form-loading":"form",onSubmit:v,children:[Object(O.jsx)("h4",{children:"reset password"}),Object(O.jsx)(R,{type:"password",name:"password",value:a,handleChange:f}),Object(O.jsx)("button",{type:"submit",className:"btn btn-block",disabled:j,children:j?"Please Wait...":"New Password"})]})]})},ee=n.p+"static/media/logo.a1c20189.svg",te=b.a.nav(Z||(Z=Object(j.a)(["\n  background: var(--white);\n  height: 6rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  .nav-center {\n    width: var(--fluid-width);\n    max-width: var(--max-width);\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    flex-wrap: wrap;\n  }\n  .nav-links {\n    display: flex;\n    flex-direction: column;\n  }\n  .nav-links p {\n    margin: 0;\n    text-transform: capitalize;\n    margin-bottom: 0.25rem;\n  }\n  .home-link {\n    display: flex;\n    align-items: flex-end;\n  }\n  @media (min-width: 776px) {\n    .nav-links {\n      flex-direction: row;\n      align-items: center;\n    }\n    .nav-links p {\n      margin: 0;\n      margin-right: 1.5rem;\n    }\n  } ;\n"]))),ne=function(){var e=w(),t=e.user,n=e.logoutUser;return Object(O.jsx)(te,{children:Object(O.jsxs)("div",{className:"nav-center",children:[Object(O.jsx)(l.b,{to:"/",className:"home-link",children:Object(O.jsx)("img",{src:ee,alt:"jobs app",className:"logo"})}),t&&Object(O.jsxs)("div",{className:"nav-links",children:[Object(O.jsxs)("p",{children:["hello, ",t.name]}),Object(O.jsx)("button",{className:"btn btn-small",onClick:function(){n()},children:"logout"})]})]})})};var ae=function(){return w().isLoading?Object(O.jsx)("section",{className:"page page-center",children:Object(O.jsx)("div",{className:"loading"})}):Object(O.jsxs)(l.a,{children:[Object(O.jsx)(ne,{}),Object(O.jsxs)(o.d,{children:[Object(O.jsx)(o.b,{path:"/",exact:!0,children:Object(O.jsx)(S,{})}),Object(O.jsx)(o.b,{path:"/login",exact:!0,children:Object(O.jsx)(E,{})}),Object(O.jsx)(o.b,{path:"/register",exact:!0,children:Object(O.jsx)(U,{})}),Object(O.jsx)(Q,{path:"/dashboard",exact:!0,children:Object(O.jsx)(q,{})}),Object(O.jsx)(o.b,{path:"/forgot-password",exact:!0,children:Object(O.jsx)(X,{})}),Object(O.jsx)(o.b,{path:"/user/verify-email",exact:!0,children:Object(O.jsx)(B,{})}),Object(O.jsx)(o.b,{path:"/user/reset-password",exact:!0,children:Object(O.jsx)(_,{})}),Object(O.jsx)(o.b,{path:"*",children:Object(O.jsx)(C,{})})]})]})};i.a.render(Object(O.jsx)(s.a.StrictMode,{children:Object(O.jsx)(v,{children:Object(O.jsx)(ae,{})})}),document.getElementById("root"))}},[[72,1,2]]]);
//# sourceMappingURL=main.3265c49c.chunk.js.map